{{< include _setup.qmd >}}

```{=html}
<style>
/* --- Workflow pipeline card --- */
.pipeline-card{
  max-width: 820px;
  margin: 1rem auto 1.2rem auto;
  padding: 0.9rem 1rem;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 14px;
  background: rgba(255,255,255,0.04);
}
.pipeline-row{
  display: grid;
  grid-template-columns: 1fr auto 1fr auto 1fr;
  gap: 0.9rem;
  align-items: center;
}
.pipeline-step{
  padding: 0.65rem 0.75rem;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(0,0,0,0.10);
}
.pipeline-title{
  font-weight: 700;
  letter-spacing: -0.01em;
  margin-bottom: 0.25rem;
}
.pipeline-sub{
  font-size: 0.85rem;
  line-height: 1.25;
  color: #9aa0a6;
}
.pipeline-arrow{
  font-size: 1.15rem;
  color: #9aa0a6;
  user-select: none;
}
.pipeline-code{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: 0.82rem;
  color: rgba(255,255,255,0.86);
  margin-top: 0.35rem;
}
@media (max-width: 860px){
  .pipeline-row{ grid-template-columns: 1fr; }
  .pipeline-arrow{ display:none; }
}
</style>
```

# Quick Start

The typical workflow is:

```{=html}
<div class="pipeline-card">
  <div class="pipeline-row">
    <div class="pipeline-step">
      <div class="pipeline-title">Input data</div>
      <div class="pipeline-sub">Two data frames: node arrivals + edge arrivals.</div>
    </div>

    <div class="pipeline-arrow">→</div>

    <div class="pipeline-step">
      <div class="pipeline-title">make_events()</div>
      <div class="pipeline-sub">Normalises times and builds event-indexed tables.</div>
    </div>

    <div class="pipeline-arrow">→</div>

    <div class="pipeline-step">
      <div class="pipeline-title">fit_hawkesNet()</div>
      <div class="pipeline-sub">Choose a kernel (BA / CS / bipartite) and fit.</div>
    </div>
  </div>
</div>
```

If you haven't already, install the package:

```{r eval = FALSE}
# install.packages("devtools")
devtools::install_github("JosephReps/hawkesNet")
```

### Input Data {.unnumbered}

Data should be consist of:

1. An `edges` data frame, requiring columns `i`, `j` and `time`.
2. Optionally a `nodes` data frame, requiring columns `id` and `time`.

```{r}
edges <- data.frame(
  i = c(1,1,3,1,4,1,4,2,9),
  j = c(2,3,4,5,6,7,8,9,10),
  time = 1:9
)

nodes <- data.frame(id = 1:10, time = 0:9)
```

### Construct events {.unnumbered}

Construct the events object using the `make_events()` function:

```{r}
ev <- make_events(nodes = nodes, edges = edges)
```

::: {.callout-note collapse="true"}
## More information on events & data structure here.
:::

### Fit model {.unnumbered}

Fit the data using an appropriate kernel:

```{r results = FALSE}
fit <- fit_hawkesNet(
  ev = ev,
  params_init = list(mu = 1, K = 1, beta = 1, beta_edges = 1),
  mark_type = "ba"
)
```

:::callout-warning
Need to implement!
:::

```{r eval = FALSE}
summary(fit)
```

::: {.callout-note collapse="true"}
## More information on model fitting here.
:::

### Diagnostics {.unnumbered}

View model fit diagnostics.

```{r fig.height=3}
par(mfrow=c(1,2))
plot(fit, type = "tau_qq")
plot(fit, type = "degree_hist")
```





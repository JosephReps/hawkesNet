{{< include _setup.qmd >}}

```{r include = FALSE}
set.seed(1)

time <- 50
params_ba_true <- list(
  mu = 0.5,
  K = 0.5,
  beta = 0.5,
  beta_edges = 2
)

sim <- sim_hawkesNet(
  params = params_ba_true,
  T_end = time,
  mark_type = "ba"
)

params_ba_init <- list(
  mu = 1,
  K = 1,
  beta = 1,
  beta_edges = 1
)

fit <- fit_hawkesNet(
      ev = sim$ev,
      params_init = params_ba_init,
      mark_type = "ba"
    )
```

# Diagnostics

*Package tooling i.e. debugging plots, ks-test etc.*

A number of diagnostic plots are available for `events` and `fit` objects.

For the examples here, we will be using the following network data (generated 
under the BA specification).

```{r}
plot(sim$net)
```

:::callout-important
These looks super ass right now, will make them look better at a later date.
:::

## Network diagnostics

You can see all the network diagnostic plots available here:

```{r fig.height = 7}
# Network diagnostic plots (2 columns)
types_net <- c("size", "edges_vs_nodes", "degree_hist", "degree_ccdf")

oldpar <- par(no.readonly = TRUE)
on.exit(par(oldpar), add = TRUE)

par(mfrow = c(ceiling(length(types_net) / 2), 2), mar = c(4, 4, 2, 1))
invisible(lapply(types_net, function(tp) plot(sim$ev, type = tp)))
```

## Temporal diagnostics

You can see all the network diagnostic plots available here:

```{r fig.height = 11}
# Temporal diagnostic plots (2 columns)
types_time <- c("count", "dt", "lambda", "tau_hist", "tau_qq")

oldpar <- par(no.readonly = TRUE)
on.exit(par(oldpar), add = TRUE)

par(mfrow = c(ceiling(length(types_time) / 2), 2), mar = c(4, 4, 2, 1))
invisible(lapply(types_time, function(tp) plot(fit, type = tp)))
```

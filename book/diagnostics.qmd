{{< include _setup.qmd >}}

```{r include = FALSE}
set.seed(1)

params_ba <- list(
  mu = 2,
  K = 0.5,
  beta = 0.8,
  beta_edges = 0.5
)

time <- 50

sim <- sim_hawkesNet(
  params = params_ba,
  T_end = time,
  mark_type = "ba"
)

params_init <- list(
  mu = 5,
  K = 0.3,
  beta = 1,
  beta_edges = 1
)

fit <- fit_hawkesNet(
    ev = sim$ev,
    params_init = params_init,
    mark_type = "ba"
)
```

# Diagnostics

*Package tooling i.e. debugging plots, ks-test etc.*

A number of diagnostic plots are available for `events` and `fit` objects.

For the examples here, we will be using the fitted model from the previous section:

```{r}
plot(sim$net)
```

## Network diagnostics

You can see all the network diagnostic plots available here:

```{r fig.height = 7}
# Network diagnostic plots (2 columns)
types_net <- c("size", "edges_vs_nodes", "degree_hist", "degree_ccdf")

oldpar <- par(no.readonly = TRUE)
on.exit(par(oldpar), add = TRUE)

par(mfrow = c(ceiling(length(types_net) / 2), 2), mar = c(4, 4, 2, 1))
invisible(lapply(types_net, function(tp) plot(sim$ev, type = tp)))
```

## Temporal diagnostics

You can see all the network diagnostic plots available here:

```{r fig.height = 9, fig.width=12}
types_time <- c("count", "dt", "lambda", "tau_hist", "tau_qq")

oldpar <- par(no.readonly = TRUE)
on.exit(par(oldpar), add = TRUE)

par(mfrow = c(2, 3), mar = c(4, 4, 2, 1))

for (tp in types_time) {
  plot(fit, type = tp)
}

plot.new()
```
